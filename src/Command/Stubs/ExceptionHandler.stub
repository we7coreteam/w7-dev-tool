<?php

namespace W7\App\Handler\Exception;

use W7\App;
use W7\Http\Message\Server\Response;
use W7\Core\Exception\Handler\HandlerAbstract;
use W7\Core\Exception\RouteNotFoundException;

class ExceptionHandler extends HandlerAbstract {
	public function handle(\Throwable $e): Response {
		if ($e instanceof RouteNotFoundException) {
			return App::getApp()->getContext()->getResponse()->withAddedHeader('Location', '/')->withStatus(302);
		}

		return parent::handle($e);
	}
}